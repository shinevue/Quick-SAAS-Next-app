/* eslint-disable @next/next/no-sync-scripts */
/* eslint-disable @next/next/no-img-element */
import Head from "next/head";
import {gql} from "@apollo/client";
import {client} from "../lib/apollo";

// Components
import FAQ from "../components/FAQ";
import Hero from "../components/Hero";
import CTAOne from "../components/CTAOne";
import Footer from "../components/Footer";
import Navbar from "../components/Navbar";
import CTATwo from "../components/CTATwo";
import HowItWorks from "../components/HowItWorks";
import TrustedBrands from "../components/TrustedBrands";
import FeaturesBanner from "../components/FeaturesBanner";

// Styling
import styles from "../styles/Home.module.scss";

export default function HomePage({homePageContent}) {
	return (
		<>
			<Head>
				{/* <title>{homePageContent.homePage}</title> */}
				<title>BlueInventory | Inventory Management Software</title>
				<meta name="description" content="Generated by create next app" />
				{/* <!-- Website Icon --> */}
				<link rel="icon" href="/img/Logos/BlueInventory favicon Two.png" />
			</Head>

			<main className={styles.main}>
				{/* Hero Section */}
				<Hero
					title={homePageContent?.heroSection?.title}
					subtitle={homePageContent?.heroSection?.subtitle}
					ButtonOne={homePageContent?.heroSection?.buttonLinkOne}
					ButtonTwo={homePageContent?.heroSection?.buttonLinkTwo}
					backgroundImage={
						homePageContent?.heroSection?.backgroundImage?.sourceUrl
					}
				/>

				{/* Feature Banner Section */}
				<FeaturesBanner
					iconOne={homePageContent?.featuresBanner[0]?.icons}
					textOne={homePageContent?.featuresBanner[0]?.text}
					iconTwo={homePageContent?.featuresBanner[1]?.icons}
					textTwo={homePageContent?.featuresBanner[1]?.text}
					iconThree={homePageContent?.featuresBanner[2]?.icons}
					textThree={homePageContent?.featuresBanner[2]?.text}
				/>

				{/* CTA Two */}
				<CTATwo
					title={homePageContent?.ctaBannerTwo?.title}
					paragraph={homePageContent?.ctaBannerTwo?.paragraph}
					button={homePageContent?.ctaBannerTwo?.buttonLink}
				/>

				{/* How It Works */}
				<HowItWorks
					title={homePageContent?.ourServiceTitle}
					subtitle={homePageContent?.ourServiceSubtitle}
					content={homePageContent?.ourServices}
				/>

				{/* Trusted Brands Logos */}
				<TrustedBrands
					logos={homePageContent.trustedBrands?.logos}
					title={homePageContent.trustedBrands?.title}
					paragraph={homePageContent.trustedBrands?.paragraph}
				/>

				{/* CTA One */}
				<CTAOne
					title={homePageContent?.ctaBannerOne?.topSection?.title}
					paragraph={homePageContent?.ctaBannerOne?.topSection?.paragraph}
					titleTwo={homePageContent?.ctaBannerOne?.bottomSection?.title}
					paragraphTwo={homePageContent?.ctaBannerOne?.bottomSection?.paragraph}
				/>

				{/* FAQ */}
				<FAQ
					title={homePageContent?.faqTitle}
					subtitle={homePageContent?.faqSubtitle}
					accordion={homePageContent?.faq}
					bottomText={homePageContent?.faqBottomText}
					buttonLink={homePageContent?.faqBottomButtonLink}
				/>
			</main>
		</>
	);
}

// Removes Global Navbar & Adds Custom Header and Footer Page layout Function
HomePage.getLayout = function PageLayout(page) {
	return (
		<>
			{/* <!--===== NAVBAR =====--> */}
			<Navbar />

			{/* <!--===== PAGE CONTENT =====--> */}
			{page}

			{/* <!--===== FOOTER =====--> */}
			<Footer />
		</>
	);
};

export async function getStaticProps() {
	const getHomePageContent = gql`
		{
			pages(where: {id: 49}) {
				edges {
					node {
						homePage {
							ctaBannerOne {
								bottomSection {
									title
									paragraph
								}
								topSection {
									title
									paragraph
								}
							}
							trustedBrands {
								paragraph
								title
								logos {
									image {
										sourceUrl
									}
								}
							}
							ourServices {
								displayImageLocation
								paragraph
								subtitle
								title
								image {
									sourceUrl
								}
								icon {
									sourceUrl
								}
							}
							heroSection {
								subtitle
								title
								buttonLinkTwo {
									url
									title
									target
								}
								buttonLinkOne {
									url
									title
									target
								}
								backgroundImage {
									sourceUrl
								}
							}
							featuresBanner {
								text
								icons {
									sourceUrl
								}
							}
							ctaBannerTwo {
								paragraph
								title
								buttonLink {
									url
									title
									target
								}
							}
							faq {
								title
								paragraph
							}
							faqTitle
							faqSubtitle
							ourServiceTitle
							ourServiceSubtitle
							faqBottomText
							faqBottomButtonLink {
								url
								title
								target
							}
						}
					}
				}
			}
		}
	`;

	const response = await client.query({
		query: getHomePageContent,
	});

	return {
		props: {
			homePageContent: response.data?.pages?.edges[0]?.node?.homePage,
		},
		revalidate: 1,
	};
}
